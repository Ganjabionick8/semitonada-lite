<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SemitONada - Campo Harm√¥nico</title>
<style>
  body {
    background: #0d0d0d;
    color: #0ff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 1rem;
    text-align: center;
    user-select: none;
  }
  h1 {
    margin-bottom: 1rem;
    font-size: 1.6rem;
    font-weight: bold;
  }
  #modo-toggle, #tones {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-bottom: 1rem;
  }
  button {
    background: #111;
    border: 1.5px solid #0ff;
    border-radius: 6px;
    color: #0ff;
    padding: 0.3rem 0.6rem;
    font-size: 0.9rem;
    cursor: pointer;
    min-width: 38px;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  button:hover {
    background-color: #0ff1;
  }
  button.active {
    background-color: #0ff;
    color: #000;
    font-weight: 700;
  }
  #graus-container {
    display: flex;
    justify-content: center;
    gap: 0.8rem;
    margin-bottom: 1rem;
  }
  .grau-coluna {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 70px;
  }
  .grau-label {
    font-weight: 700;
    margin-bottom: 0.25rem;
  }
  .nota {
    border: 1px solid #0ff;
    background-color: #111;
    border-radius: 6px;
    padding: 0.4rem 0.6rem;
    width: 100%;
    text-align: center;
    font-size: 1rem;
  }
  #acorde-selecionado {
    font-size: 1.3rem;
    font-weight: 600;
    margin: 1rem 0 1.5rem 0;
    min-height: 2rem;
  }
  .apoie {
    margin-top: 2.5rem;
    font-size: 0.9rem;
    color: #66ffffcc;
    line-height: 1.3;
  }
  .apoie p {
    margin: 0.25rem 0;
  }
  .apoie p.thanks {
    font-size: 0.8rem;
    color: #339999cc;
    margin-top: 0.7rem;
  }
</style>
</head>
<body>

<h1>SemitONada - Campo Harm√¥nico</h1>

<div id="modo-toggle">
  <button id="btnGeral" class="active">Geral</button>
  <button id="btnIndividual">Individual</button>
</div>

<div id="tones"></div>

<div id="graus-container"></div>

<div id="acorde-selecionado" style="display:none;"></div>

<div class="apoie">
  <p>Se curtir o SemitONada, considere apoiar o projeto üôè</p>
  <p><strong>Pix:</strong> biel.simeone@gmail.com</p>
  <p>Qualquer valor √© bem-vindo e ajuda muito no desenvolvimento!</p>
  <p class="thanks">Obrigado por apoiar! üíúüé∂</p>
</div>

<script>
const campos = {
  'C': ['C', 'Dm', 'Em', 'F', 'G', 'Am', 'Bdim'],
  'C#': ['C#', 'D#m', 'E#m', 'F#', 'G#', 'A#m', 'B#dim'],
  'D': ['D', 'Em', 'F#m', 'G', 'A', 'Bm', 'C#dim'],
  'D#': ['D#', 'Fm', 'Gm', 'G#', 'A#', 'Cm', 'Ddim'],
  'E': ['E', 'F#m', 'G#m', 'A', 'B', 'C#m', 'D#dim'],
  'F': ['F', 'Gm', 'Am', 'A#', 'C', 'Dm', 'Edim'],
  'F#': ['F#', 'G#m', 'A#m', 'B', 'C#', 'D#m', 'E#dim'],
  'G': ['G', 'Am', 'Bm', 'C', 'D', 'Em', 'F#dim'],
  'G#': ['G#', 'A#m', 'Cm', 'C#', 'D#', 'Fm', 'Gdim'],
  'A': ['A', 'Bm', 'C#m', 'D', 'E', 'F#m', 'G#dim'],
  'A#': ['A#', 'Cm', 'Dm', 'D#', 'F', 'Gm', 'Adim'],
  'B': ['B', 'C#m', 'D#m', 'E', 'F#', 'G#m', 'A#dim'],
  'Cm': ['Cm', 'Ddim', 'D#', 'Fm', 'Gm', 'G#', 'A#'],
  'C#m': ['C#m', 'D#dim', 'E', 'F#m', 'G#m', 'A', 'B'],
  'Dm': ['Dm', 'Edim', 'F', 'Gm', 'Am', 'A#', 'C'],
  'D#m': ['D#m', 'Fdim', 'F#', 'G#m', 'A#m', 'B', 'C#'],
  'Em': ['Em', 'F#dim', 'G', 'Am', 'Bm', 'C', 'D'],
  'Fm': ['Fm', 'Gdim', 'G#', 'A#m', 'Cm', 'C#', 'D#'],
  'F#m': ['F#m', 'G#dim', 'A', 'Bm', 'C#m', 'D', 'E'],
  'Gm': ['Gm', 'Adim', 'A#', 'Cm', 'Dm', 'D#', 'F'],
  'G#m': ['G#m', 'A#dim', 'B', 'C#m', 'D#m', 'E', 'F#'],
  'Am': ['Am', 'Bdim', 'C', 'Dm', 'Em', 'F', 'G'],
  'A#m': ['A#m', 'Cdim', 'C#', 'D#m', 'Fm', 'F#', 'G#'],
  'Bm': ['Bm', 'C#dim', 'D', 'Em', 'F#m', 'G', 'A']
};

const graus = ['I','II','III','IV','V','VI','VII'];
let tomAtual = null;
let grauAtual = null;
let modo = 'geral';

const tonesDiv = document.getElementById('tones');
const grausContainer = document.getElementById('graus-container');
const acordeSel = document.getElementById('acorde-selecionado');

function criarGraus() {
  grausContainer.innerHTML = '';
  graus.forEach((g, i) => {
    const col = document.createElement('div');
    col.className = 'grau-coluna';
    const label = document.createElement('div');
    label.className = 'grau-label';
    label.textContent = g;
    const notaDiv = document.createElement('div');
    notaDiv.className = 'nota';
    notaDiv.id = 'nota-' + i;
    notaDiv.textContent = '-';
    col.appendChild(label);
    col.appendChild(notaDiv);
    grausContainer.appendChild(col);
  });
}

function atualizarNotasGeral() {
  if (!tomAtual) return;
  campos[tomAtual].forEach((acorde, i) => {
    const notaDiv = document.getElementById('nota-' + i);
    if (notaDiv) {
      notaDiv.textContent = acorde;
    }
  });
}

function limparNotas() {
  for(let i=0; i<graus.length; i++){
    const notaDiv = document.getElementById('nota-' + i);
    if(notaDiv) notaDiv.textContent = '-';
  }
}

Object.keys(campos).forEach(tom => {
  const btn = document.createElement('button');
  btn.textContent = tom;
  btn.onclick = () => {
    tomAtual = tom;
    grauAtual = null;
    mostrar();
  };
  tonesDiv.appendChild(btn);
});

document.getElementById('btnGeral').onclick = () => {
  modo = 'geral';
  grauAtual = null;
  mostrar();
};

document.getElementById('btnIndividual').onclick = () => {
  modo = 'individual';
  grauAtual = null;
  mostrar();
};

function mostrar() {
  document.querySelectorAll('#modo-toggle button').forEach(b => b.classList.remove('active'));
  document.getElementById(modo === 'geral' ? 'btnGeral' : 'btnIndividual').classList.add('active');

  acordeSel.style.display = 'none';

  if (!tomAtual) {
    limparNotas();
    return;
  }

  if (modo === 'geral') {
    criarGraus();
    atualizarNotasGeral();
  } else {
    criarGraus();
    limparNotas();
    acordeSel.style.display = 'block';
    acordeSel.textContent = 'Selecione um grau';
    criarBotoesGraus();
  }
}

function criarBotoesGraus() {
  grausContainer.querySelectorAll('.grau-coluna').forEach((col, i) => {
    col.style.cursor = 'pointer';
    col.onclick = () => {
      grauAtual = i;
      mostrarIndividual();
    };
  });
}

function mostrarIndividual() {
  if (grauAtual === null || !tomAtual) return;
  limparNotas();
  const notaDiv = document.getElementById('nota-' + grauAtual);
  if (notaDiv) {
    notaDiv.textContent = campos[tomAtual][grauAtual];
  }
  acordeSel.textContent = `${graus[grauAtual]}: ${campos[tomAtual][grauAtual]}`;
}

mostrar();
</script>

</body>
</html>
