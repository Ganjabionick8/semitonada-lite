<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SemitONada Lite - Modos Geral/Individual</title>
<style>
  body {
    background: #0d0d0d;
    color: #0ff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  h1 {
    margin-bottom: 1rem;
  }
  #tones, #graus {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  button {
    background: #111;
    border: 1px solid #0ff;
    border-radius: 8px;
    color: #0ff;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    cursor: pointer;
    min-width: 40px;
    user-select: none;
  }
  button:hover {
    background: #0ff1;
  }
  button.active {
    background: #0ff;
    color: #000;
    font-weight: bold;
  }
  #acorde-selecionado {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 2rem;
    min-height: 2.5rem;
    text-align: center;
  }
  #modo-toggle {
    margin-bottom: 1rem;
  }
  .output-geral {
    display: grid;
    grid-template-columns: repeat(7, auto);
    gap: 0.5rem;
    margin-bottom: 2rem;
    text-align: center;
  }
  .output-geral div {
    border: 1px solid #0ff4;
    border-radius: 6px;
    padding: 0.5rem 0;
    min-width: 40px;
  }
  .apoie {
    font-size: 0.9rem;
    color: #888;
    text-align: center;
    max-width: 280px;
  }
</style>
</head>
<body>

<h1>Campo Harm√¥nico - Modos Geral / Individual</h1>

<div id="modo-toggle">
  <button id="btnGeral" class="active">Modo Geral</button>
  <button id="btnIndividual">Modo Individual</button>
</div>

<div id="tones"></div>

<div id="graus" style="display:none;">
  <button data-grau="0">I</button>
  <button data-grau="1">II</button>
  <button data-grau="2">III</button>
  <button data-grau="3">IV</button>
  <button data-grau="4">V</button>
  <button data-grau="5">VI</button>
  <button data-grau="6">VII</button>
</div>

<div class="output-geral" id="output-geral"></div>

<div id="acorde-selecionado" style="display:none;">Selecione um tom e um grau</div>

<div class="apoie">
  <p>Gostou do app? Apoie o projeto com qualquer valor üôè</p>
  <p><strong>Pix:</strong> seu.pix@exemplo.com</p>
</div>

<script>
  const campos = {
    'C': ['C', 'Dm', 'Em', 'F', 'G', 'Am', 'Bdim'],
    'C#/Db': ['C#', 'D#m', 'E#m', 'F#', 'G#', 'A#m', 'B#dim'],
    'D': ['D', 'Em', 'F#m', 'G', 'A', 'Bm', 'C#dim'],
    'D#/Eb': ['D#', 'Fm', 'Gm', 'G#', 'A#', 'Cm', 'Ddim'],
    'E': ['E', 'F#m', 'G#m', 'A', 'B', 'C#m', 'D#dim'],
    'F': ['F', 'Gm', 'Am', 'A#', 'C', 'Dm', 'Edim'],
    'F#/Gb': ['F#', 'G#m', 'A#m', 'B', 'C#', 'D#m', 'E#dim'],
    'G': ['G', 'Am', 'Bm', 'C', 'D', 'Em', 'F#dim'],
    'G#/Ab': ['G#', 'A#m', 'Cm', 'C#', 'D#', 'Fm', 'Gdim'],
    'A': ['A', 'Bm', 'C#m', 'D', 'E', 'F#m', 'G#dim'],
    'A#/Bb': ['A#', 'Cm', 'Dm', 'D#', 'F', 'Gm', 'Adim'],
    'B': ['B', 'C#m', 'D#m', 'E', 'F#', 'G#m', 'A#dim'],
    'Cm': ['Cm', 'Ddim', 'D#', 'Fm', 'Gm', 'G#', 'A#'],
    'C#m': ['C#m', 'D#dim', 'E', 'F#m', 'G#m', 'A', 'B'],
    'Dm': ['Dm', 'Edim', 'F', 'Gm', 'Am', 'A#', 'C'],
    'D#m': ['D#m', 'Fdim', 'F#', 'G#m', 'A#m', 'B', 'C#'],
    'Em': ['Em', 'F#dim', 'G', 'Am', 'Bm', 'C', 'D'],
    'Fm': ['Fm', 'Gdim', 'G#', 'A#m', 'Cm', 'C#', 'D#'],
    'F#m': ['F#m', 'G#dim', 'A', 'Bm', 'C#m', 'D', 'E'],
    'Gm': ['Gm', 'Adim', 'A#', 'Cm', 'Dm', 'D#', 'F'],
    'G#m': ['G#m', 'A#dim', 'B', 'C#m', 'D#m', 'E', 'F#'],
    'Am': ['Am', 'Bdim', 'C', 'Dm', 'Em', 'F', 'G'],
    'A#m': ['A#m', 'Cdim', 'C#', 'D#m', 'Fm', 'F#', 'G#'],
    'Bm': ['Bm', 'C#dim', 'D', 'Em', 'F#m', 'G', 'A']
  };

  const tonesContainer = document.getElementById('tones');
  const grausDiv = document.getElementById('graus');
  const outputGeral = document.getElementById('output-geral');
  const acordeSelecionado = document.getElementById('acorde-selecionado');
  const btnGeral = document.getElementById('btnGeral');
  const btnIndividual = document.getElementById('btnIndividual');

  let tomSelecionado = null;
  let grauSelecionado = null;
  let modo = 'geral'; // 'geral' ou 'individual'

  // Cria bot√µes de tom
  Object.keys(campos).forEach(tom => {
    const btn = document.createElement('button');
    btn.textContent = tom;
    btn.onclick = () => {
      tomSelecionado = tom;
      grauSelecionado = null;
      if (modo === 'geral') {
        mostrarGeral();
      } else {
        acordeSelecionado.textContent = 'Selecione um grau';
        grauSelecionado = null;
        // desativa bot√µes grau
        grausDiv.querySelectorAll('button').forEach(b => b.classList.remove('active'));
      }
    };
    tonesContainer.appendChild(btn);
  });

  // Eventos dos graus
  grausDiv.querySelectorAll('button').forEach(btn => {
    btn.onclick = () => {
      if (!tomSelecionado) {
        alert('Selecione primeiro um tom!');
        return;
      }
      grausDiv.querySelectorAll('button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      grauSelecionado = Number(btn.dataset.grau);
      mostrarIndividual();
    };
  });

  // Toggle de modos
  btnGeral.onclick = () => {
    modo = 'geral';
    btnGeral.classList.add('active');
    btnIndividual.classList.remove('active');
    grausDiv.style.display = 'none';
    acordeSelecionado.style.display = 'none';
    outputGeral.style.display = 'grid';
    if (tomSelecionado) mostrarGeral();
  };

  btnIndividual.onclick = () => {
    modo = 'individual';
    btnIndividual.classList.add('active');
    btnGeral.classList.remove('active');
    grausDiv.style.display = 'flex';
    acordeSelecionado.style.display = 'block';
    outputGeral.style.display = 'none';
    if (tomSelecionado && grauSelecionado !== null) {
      mostrarIndividual();
    } else if (tomSelecionado) {
      acordeSelecionado.textContent = 'Selecione um grau';
    }
  };

  // Mostrar todos os graus com acordes
  function mostrarGeral() {
    outputGeral.innerHTML = '';
    const acordes = campos[tomSelecionado];
    if (!acordes) return;
    acordes.forEach((acorde, i) => {
      const div = document.createElement('div');
      div.textContent = `${['I','II','III','IV','V','VI','VII'][i]}: ${acorde}`;
      outputGeral.appendChild(div);
    });
  }

  // Mostrar acorde individual selecionado
  function mostrarIndividual() {
    if (!tomSelecionado || grauSelecionado === null) return;
    const acordes = campos[tomSelecionado];
    if (!acordes) return;
    const acorde = acordes[grauSelecionado];
    acordeSelecionado.textContent = acorde || '-';
  }

  // Inicializa em modo geral
  btnGeral.click();
</script>

</body>
</html>
